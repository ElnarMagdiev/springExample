<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Main page</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link rel="stylesheet" href="/static/style.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link th:insert="parts/scripts :: bsHead">
</head>
<body>
<div th:insert="parts/navbar :: navbar"></div>

<div class="container mt-5">
    <form th:action="@{/logout}" method="post">
        <input type="submit" value="Sign Out"/>
    </form>
    <div>
        <span><a href="/user">User list</a></span>
    </div>
    <br>
    <div>
        <form method="post" enctype="multipart/form-data">
            <input type="text" name="text" placeholder="Введите сообщение">
            <input type="text" name="tag" placeholder="Тэг">
            <input type="file" name="file">
            <button type="submit">Добавить</button>
        </form>
    </div>
    <div>Список сообщений</div>
    <form method="get" action="main">
        <input type="text" name="filter" th:value="${filter}">
        <button type="submit">Найти</button>
    </form>

    <p th:each="message : ${messages}">
        <b th:text="${message.id}"></b>
        <span th:text="${message.text}"></span>
        <i th:text="${message.tag}"></i>
        <strong th:text="${message.authorName}"></strong>
        <img th:if="${message.filename != null}" th:src="@{'/img/' + ${message.filename}}">
    </p>

</div>

<div th:insert="parts/scripts :: script"></div>
</body>
</html>